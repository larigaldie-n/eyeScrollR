<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="eyeScrollR">
<title>Introduction to eyeScrollR • eyeScrollR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to eyeScrollR">
<meta property="og:description" content="eyeScrollR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">eyeScrollR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/eyeScrollR.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/fixed_areas.html">Using eyeScrollR with fixed areas</a>
    <a class="dropdown-item" href="../articles/limitations.html">limitations</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to eyeScrollR</h1>
            
      
      
      <div class="d-none name"><code>eyeScrollR.Rmd</code></div>
    </div>

    
    
<p>The goal of eyeScrollR is to extract the necessary information from
eye-tracking data to easily and automatically place fixations on the
right areas of a scrollable website.</p>
<p>Usually, eye-tracker data consist in arrays of fixation coordinates
on the screen itself. If a participant is staring right at the middle of
a screen with resolution 1920*1080, eye-tracking software will return an
array of fixation records with coordinates x = 960; y = 540. When the
material being watched is static and does not overflow, converting
coordinates from the screen to coordinates on the image can be
effortless (and even automatically made by the software).</p>
<p>However, if the participant has the option to scroll down on the
application he is using, this conversion suddenly can become difficult,
and some researchers end up either making endless manual corrections, or
even abandoning these research settings altogether. With this package,
only a few minutes of preparation should be necessary for most
researchers to perform these conversions without sacrificing too much
ecological validity. This documentation was designed to make the use of
this package as easy as possible, with step-by-step reproducible
examples.</p>
<p>Provided that you already have an image, a dataset and correct
measurements, outputting a correct heatmap from the eye-tracker’s raw
data may be as simple as this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://larigaldie-n.github.io/eyeScrollR/">eyeScrollR</a></span><span class="op">)</span></span>
<span><span class="va">calibration</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scroll_calibration_auto.html">scroll_calibration_auto</a></span><span class="op">(</span>calibration_image <span class="op">=</span> <span class="va">calibration_image</span>,</span>
<span>                                       scroll_pixels <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eye_scroll_correct.html">eye_scroll_correct</a></span><span class="op">(</span>eyes_data <span class="op">=</span> <span class="va">dataset</span>, timestamp_start <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>                            timstamp_stop <span class="op">=</span> <span class="fl">50000</span>, image_width <span class="op">=</span> <span class="fl">1920</span>,</span>
<span>                            image_height <span class="op">=</span> <span class="fl">10000</span>, calibration <span class="op">=</span> <span class="va">calibration</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/generate_heatmap.html">generate_heatmap</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">data</span>, heatmap_image <span class="op">=</span> <span class="va">heatmap_image</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="before-you-start">Before you start<a class="anchor" aria-label="anchor" href="#before-you-start"></a>
</h2>
<div class="section level3">
<h3 id="understand-the-use-case-scenario">Understand the use-case scenario<a class="anchor" aria-label="anchor" href="#understand-the-use-case-scenario"></a>
</h3>
<p>Consider this situation, where a participant fixates 6 different
areas on a screen (represented by red and green spots) while browsing a
website, scrolls down, then fixates the 6 exact same areas:</p>
<p><img src="example_eyeScrollR_small_vertical.png" width="100%"></p>
<p>Although red fixation spots do indeed match the same content in both
situations, green fixations spots don’t; and any analysis on the content
being fixated should convert those screen coordinates to the “content
coordinates”.</p>
<p>In other words, if we unscrolled the content of the screen to a
single long image, we would like the fixations to be correctly placed on
it, as so:</p>
<p><img src="example_eyeScrollR_vertical_full.png" width="100%"></p>
<p>… Which is exactly what this package is for.</p>
<p>On top of this, we may often want to get rid of anything outside the
website itself (such as the browser header, the Windows bar at the
bottom, …), and some areas of websites might be static and follow the
screen even when the participant scrolls down. eyeScrollR is equipped to
deal with such situations.</p>
<p><strong>Please do note that as of now, eyeScrollR has only been
tested on data from the iMotions software. Future support for other
software should be expected, but is not yet guaranteed.</strong></p>
</div>
<div class="section level3">
<h3 id="set-up-the-experimental-setting">Set up the experimental setting<a class="anchor" aria-label="anchor" href="#set-up-the-experimental-setting"></a>
</h3>
<p>Although eyeScrollR is dealing with the participant’s data, getting
the most reliable and accurate placements and timings may require to
change a few browser settings. These steps are not completely necessary,
but if omitted may often result in a few pixels of inaccuracy in the
fixation’s coordinates, and they may be temporarily ahead of time by up
to ~150ms during scrolling blur periods. Quite rarely, it may mess up
with the whole file; especially if the participant had a very fast-paced
and erratic scrolling pattern.</p>
<p>This is why it is recommended to deactivate the smooth scrolling on
your browser, and to get rid of the side scrollbar. In Chrome/Chromium
browsers, deactivating the smooth scrolling can easily be done by typing
“<a href="chrome://flags/" class="uri">chrome://flags/</a>” in the
address bar, and disabling the “Smooth Scrolling” option. Similarly, the
scrollbar can be hidden by enabling the “Overlay Scrollbars” option.</p>
<p>In Firefox browsers, a few free extensions can easily be found to
hide the scrollbar and smooth scrolling can be deactivated directly from
the settings menu.</p>
</div>
<div class="section level3">
<h3 id="anticipate-the-necessary-information-material">Anticipate the necessary information &amp; material<a class="anchor" aria-label="anchor" href="#anticipate-the-necessary-information-material"></a>
</h3>
<p>eyeScrollR is mainly designed to work on “unscrolled” images of
websites. Those can be automatically captured through various free or
paid extensions for Chromium/Firefox browsers (and probably more), or
manually constructed/modified if necessary. The resulting image should
be an unscrolled image, with an horizontal size equal to that of your
browser viewing area and a vertical size equal to the total length of
the webpage. Procuring this image is let to the reader’s
preferences.</p>
<p>Once you have this image, all you need are a few measurements on the
monitor used for the experiment, an eye-tracking dataset <em>including
the participant’s mouse inputs and fixation coordinates</em>, and you
are all set.</p>
<p>Some of these measurements can be done automatically through the <a href="../calibration.html" title="Calibration page">Calibration
page</a>, but they can also be input manually if necessary.</p>
</div>
</div>
<div class="section level2">
<h2 id="a-complete-example">A complete example<a class="anchor" aria-label="anchor" href="#a-complete-example"></a>
</h2>
<p>If you so desire, you should be able to follow along (the webpage
used for this example can be found <a href="../test_no_fixed.html" title="simple test page">here</a>).</p>
<p>Arguably, the first step before even getting eye-tracker data would
be to get all the measurements ready for the “calibration” phase.</p>
<div class="section level3">
<h3 id="calibrate">Calibrate<a class="anchor" aria-label="anchor" href="#calibrate"></a>
</h3>
<p>If this is your first time using this package, it is advisable to
check the results from the automatic calibration with the manual one to
check for consistency. If any discrepancy is found, or if the automatic
calibration fails, please revert to the manual one.</p>
<p>The purpose of the calibration is to feed the program with the size
of the screen, the location of the browsing area inside the screen, and
how many pixels are being scrolled each time a participant scrolls down
or up on the browser that will be used.</p>
<p>You just have to go to the <a href="../calibration.html" title="Calibration page">Calibration page</a> and follow the
instructions. Once you have the scroll_pixels value, take a screenshot
of the whole screen including the calibration page, and save it as an
image file.</p>
<p>If you have several monitors on the computer, make sure to only take
a screenshot of the monitor on which the eye-tracker is used. The
resulting image should therefore be the exact same size as your monitor
resolution.</p>
<div class="section level4">
<h4 id="automatic-calibration">Automatic calibration<a class="anchor" aria-label="anchor" href="#automatic-calibration"></a>
</h4>
<p>This is the fastest and easiest way to calibrate. Just pass the
screenshot you just took along with the scroll_pixels value to the
scroll_calibration_auto function. For instance:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://larigaldie-n.github.io/eyeScrollR/">eyeScrollR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://www.rforge.net/png/" class="external-link">png</a></span><span class="op">)</span></span>
<span><span class="va">calibration_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html" class="external-link">readPNG</a></span><span class="op">(</span><span class="st">"calibrate.png"</span><span class="op">)</span></span>
<span><span class="va">calibration</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scroll_calibration_auto.html">scroll_calibration_auto</a></span><span class="op">(</span>calibration_image <span class="op">=</span> <span class="va">calibration_image</span>,</span>
<span>                                       scroll_pixels <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>The calibration should now be over!</p>
</div>
<div class="section level4">
<h4 id="manual-calibration">Manual calibration<a class="anchor" aria-label="anchor" href="#manual-calibration"></a>
</h4>
<p>Should the automatic calibration fail, you can always do it manually.
Just open the screenshot you took earlier, and look for the coordinates
of the pixels in the most to the top left and to the bottom right of the
browsing area. The search is made easier by the colored squares in those
corners.</p>
<p>Most graphics editors should allow you to easily get the image size
and the coordinates of the pixel you are interested in by just zooming
and placing your cursor on it (for the example, the pixel you are
interested in was colored in black).</p>
<p><img src="calibration_manual_example_combined.png" width="100%"></p>
<p>Repeat the same process for the bottom-rightmost pixel.</p>
<p>You then just have to report the values in the
scroll_calibration_manual function:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://larigaldie-n.github.io/eyeScrollR/">eyeScrollR</a></span><span class="op">)</span></span>
<span><span class="va">calibration</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/scroll_calibration_manual.html">scroll_calibration_manual</a></span><span class="op">(</span>screen_width <span class="op">=</span> <span class="fl">1920</span>, screen_height <span class="op">=</span> <span class="fl">1080</span>,</span>
<span>                                         top_left_x <span class="op">=</span> <span class="fl">0</span>, top_left_y <span class="op">=</span> <span class="fl">89</span>,</span>
<span>                                         bottom_right_x <span class="op">=</span> <span class="fl">1919</span>, bottom_right_y <span class="op">=</span> <span class="fl">1029</span>,</span>
<span>                                         scroll_pixels <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="get-some-data-and-the-full-website-image">Get some data, and the full website image<a class="anchor" aria-label="anchor" href="#get-some-data-and-the-full-website-image"></a>
</h3>
<p>The next step is to get a full, unscrolled image of the website. As
was said earlier, there are several ways to achieve this, and many
browser extensions are available. In our case, we ended up with this
simple image:</p>
<p><img src="a_random_website.png" width="100%"></p>
<p>This image width and height are to be passed to the
eye_scroll_correct function in the next section.</p>
</div>
<div class="section level3">
<h3 id="convert">Convert<a class="anchor" aria-label="anchor" href="#convert"></a>
</h3>
<p>After a careful examination of the video from the eye-tracking
session of the participant and the key events, it could be determined in
our example that the participant was looking at the webpage of interest
from timestamps 3577 to 30864. All we need now is to import our dataset,
which includes the fixation coordinates, mouse events, and timestamps.
After that, we can apply the correction!</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span>
<span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span><span class="st">"test_data.csv"</span>, comment <span class="op">=</span> <span class="st">"#"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">test_data</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">test_data</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">corrected_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eye_scroll_correct.html">eye_scroll_correct</a></span><span class="op">(</span>eyes_data <span class="op">=</span> <span class="va">test_data</span>,</span>
<span>                                     timestamp_start <span class="op">=</span> <span class="fl">3577</span>,</span>
<span>                                     timestamp_stop <span class="op">=</span> <span class="fl">30864</span>,</span>
<span>                                     image_width <span class="op">=</span> <span class="fl">1920</span>,</span>
<span>                                     image_height <span class="op">=</span> <span class="fl">1442</span>,</span>
<span>                                     calibration <span class="op">=</span> <span class="va">calibration</span><span class="op">)</span></span></code></pre></div>
<p>The dataset itself has to respect the standard naming conventions
from the iMotions software (see more details in the eye_scroll_correct
help page).</p>
</div>
<div class="section level3">
<h3 id="output">Output!<a class="anchor" aria-label="anchor" href="#output"></a>
</h3>
<p>Finally, we can use the built-in heatmap generation function to check
if everything went fine:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">heatmap_image</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html" class="external-link">readPNG</a></span><span class="op">(</span><span class="st">"a_random_website.png"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/generate_heatmap.html">generate_heatmap</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">corrected_data</span>, heatmap_image <span class="op">=</span> <span class="va">heatmap_image</span><span class="op">)</span></span></code></pre></div>
<p><img src="final_plot.png" width="100%"></p>
</div>
</div>
<div class="section level2">
<h2 id="a-more-complicated-setting">A more complicated setting?<a class="anchor" aria-label="anchor" href="#a-more-complicated-setting"></a>
</h2>
<p>This example was kept simple on purpose, by not having any fixed area
inside the webpage. For a more complicated example using fixed areas
that are also changing in size during the scrolldown, you can visit the
<a href="fixed_areas.html" title="article on fixed areas">article on
fixed areas</a></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nathanael Larigaldie, Anna Dreneva, Jacob Orquin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
